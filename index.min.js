var _interopRequireDefault=require("@babel/runtime-corejs3/helpers/interopRequireDefault"),_Object$defineProperty=require("@babel/runtime-corejs3/core-js-stable/object/define-property");_Object$defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.BoxPage=exports.disable=exports.setDirection=void 0;var _setTimeout2=_interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/set-timeout")),_map=_interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/instance/map")),_slicedToArray2=_interopRequireDefault(require("@babel/runtime-corejs3/helpers/slicedToArray")),_classCallCheck2=_interopRequireDefault(require("@babel/runtime-corejs3/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime-corejs3/helpers/createClass")),_possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime-corejs3/helpers/possibleConstructorReturn")),_getPrototypeOf2=_interopRequireDefault(require("@babel/runtime-corejs3/helpers/getPrototypeOf")),_assertThisInitialized2=_interopRequireDefault(require("@babel/runtime-corejs3/helpers/assertThisInitialized")),_inherits2=_interopRequireDefault(require("@babel/runtime-corejs3/helpers/inherits")),_react=_interopRequireDefault(require("react")),_reactLifecyclesCompat=require("react-lifecycles-compat");require("./index.scss");var direction="none",setDirection=function(dir){return direction=dir};exports.setDirection=setDirection;var mask=null,disable=function(argument_0){if(0<arguments.length&&void 0!==argument_0&&argument_0)return mask.parentNode.removeChild(mask),void(mask=null);(mask=document.createElement("div")).classList.add("xl-page-transition-mask"),document.body.appendChild(mask)};exports.disable=disable;var BoxPage=function(props){var children=props.children,_props$compontent=props.compontent,compontent=void 0===_props$compontent?"div":_props$compontent;return _react.default.createElement(compontent,props,children)};exports.BoxPage=BoxPage;var Page=function(_React$Component){function Page(){var _this;return(0,_classCallCheck2.default)(this,Page),(_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(Page).call(this))).getChildrens=function(props){var _context,children=props.children,preChildren=(0,_assertThisInitialized2.default)(_this).preChildren,_React$Children$map=(0,_map.default)(_context=_react.default.Children).call(_context,children,function(item){return item}),nextChildren=(0,_slicedToArray2.default)(_React$Children$map,1)[0],childrens=[nextChildren];preChildren&&nextChildren.key!==preChildren.key&&"none"!==direction?(_this.nextChildren=props,"left"===direction?childrens=[preChildren=_react.default.cloneElement(preChildren,{className:"xl-page-transition-left-pre xl-page-transition"}),nextChildren=_react.default.cloneElement(nextChildren,{className:"xl-page-transition-left-next xl-page-transition"})]:"right"===direction&&(preChildren=_react.default.cloneElement(preChildren,{className:"xl-page-transition-right-pre xl-page-transition"}),childrens=[nextChildren=_react.default.cloneElement(nextChildren,{className:"xl-page-transition-right-next xl-page-transition"}),preChildren])):_this.nextChildren=null,_this.preChildren=nextChildren,_this.setState({childrens:_react.default.createElement("div",{id:"xl-page-transition-action-box"},childrens)})},_this.preChildren=null,_this.nextChildren=null,_this.state={childrens:null},_this}return(0,_inherits2.default)(Page,_React$Component),(0,_createClass2.default)(Page,[{key:"componentWillMount",value:function(){this.getChildrens(this.props)}},{key:"componentWillReceiveProps",value:function(nextProps){this.getChildrens(nextProps)}},{key:"componentDidUpdate",value:function(){var _this2=this;this.nextChildren&&((0,_setTimeout2.default)(function(){document.querySelector("#xl-page-transition-action-box").classList.add("action")},50),(0,_setTimeout2.default)(function(){document.querySelector("#xl-page-transition-action-box").classList.remove("action"),_this2.getChildrens(_this2.nextChildren),direction="none"},300))}},{key:"render",value:function(){return this.state.childrens}}]),Page}(_react.default.Component);(0,_reactLifecyclesCompat.polyfill)(Page);var _default=Page;exports.default=_default;